# ‚ùì –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã

## 1. ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è Cursor

### –í–æ–ø—Ä–æ—Å
> –ê –≤–æ–∑–º–æ–∂–Ω–æ –¥–ª—è cursor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏–∑ fix —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ñ–∞–π–ª—ã?

### –û—Ç–≤–µ—Ç

**‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û!**

–¢–µ–ø–µ—Ä—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã** –¥–ª—è Cursor AI!

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ –∞–Ω–∞–ª–∏–∑
npm start -- --path=/project --refactor-dir=refactoring

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:
refactoring/cursor-prompts/
‚îú‚îÄ‚îÄ MASTER_PROMPT.md                    # –ú–∞—Å—Ç–µ—Ä-–ø–ª–∞–Ω –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ prompts-index.json                  # –ò–Ω–¥–µ–∫—Å —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ app_Http_Controllers_Product.md     # –ü—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
‚îî‚îÄ‚îÄ app_Models_User.md                  # –° –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
```

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç:

```markdown
# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤ app/Http/Controllers/ProductController.php

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL

## üìã –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### üîí SQL Injection Risk
**–°—Ç—Ä–æ–∫–∞ 45:**
- Potential SQL Injection: DB::raw() with variables
- üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Use parameter binding

### ‚ö° N Plus One Query
**–°—Ç—Ä–æ–∫–∞ 62:**
- Relationship access inside loop
- üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Use ->with(['relationName'])

## üéØ –ó–∞–¥–∞—á–∏:
1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `app/Http/Controllers/ProductController.php`
2. –ò—Å–ø—Ä–∞–≤—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã
3. –°–ª–µ–¥—É–π: SOLID, PSR-12, Laravel best practices

## üìö –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
[–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–±–ª–µ–º]
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Cursor:

```bash
# 1. –û—Ç–∫—Ä—ã—Ç—å –º–∞—Å—Ç–µ—Ä-–ø–ª–∞–Ω
cursor refactoring/cursor-prompts/MASTER_PROMPT.md

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
# –ù–∞–ø—Ä–∏–º–µ—Ä: app_Http_Controllers_Product.md

# 3. –í Cursor AI –Ω–∞–ø–∏—Å–∞—Ç—å:
@app/Http/Controllers/ProductController.php

[–í–°–¢–ê–í–ò–¢–¨ –°–ö–û–ü–ò–†–û–í–ê–ù–ù–´–ô –ü–†–û–ú–ü–¢]
```

### –ü—Ä–æ–º–ø—Ç —É—á–∏—Ç—ã–≤–∞–µ—Ç:

- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç —Ñ–∞–π–ª–∞** - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —É–∫–∞–∑–∞–Ω
- ‚úÖ **–ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫** - —Ç–æ—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –≥–¥–µ –ø—Ä–æ–±–ª–µ–º–∞
- ‚úÖ **–¢–∏–ø –ø—Ä–æ–±–ª–µ–º—ã** - SQL Injection, N+1, etc.
- ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** - critical, major, minor
- ‚úÖ **–°—Ç—Ä–∞—Ç–µ–≥–∏—é** - –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å
- ‚úÖ **–ß–µ–∫–ª–∏—Å—Ç** - –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**–î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ª—É—á–∞—è:**
```
@app/Http/Controllers/OrderController.php

–ò—Å–ø—Ä–∞–≤—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ:

1. –°—Ç—Ä–æ–∫–∞ 45: SQL Injection - –∏—Å–ø–æ–ª—å–∑—É–π parameter binding
   DB::raw("WHERE id = ?", [$id])

2. –°—Ç—Ä–æ–∫–∞ 62: N+1 Query - –¥–æ–±–∞–≤—å eager loading
   Order::with(['items', 'user'])->get()

3. –°—Ç—Ä–æ–∫–∞ 78: –ë–æ–ª—å—à–æ–π –º–µ—Ç–æ–¥ (50 —Å—Ç—Ä–æ–∫) - —Ä–∞–∑–±–µ–π –Ω–∞:
   - validateOrder()
   - calculateTotal()
   - sendNotification()

–°–ª–µ–¥—É–π Laravel best practices –∏ –¥–æ–±–∞–≤—å type hints.
```

**–î–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —Å–ª—É—á–∞—è —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
```
@app/Services/OrderService.php

‚ö†Ô∏è –í–ê–ñ–ù–û: –í —Ñ–∞–π–ª–µ –µ—Å—Ç—å –∏ –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã, –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ.
–ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ–Ω!

–≠–¢–ê–ü 1: –†–∞–∑–±–µ–π –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã
- processOrder (60 —Å—Ç—Ä–æ–∫) ‚Üí 5 –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- processRefund (55 —Å—Ç—Ä–æ–∫) ‚Üí 5 –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤

–≠–¢–ê–ü 2: –ó–∞–ø—É—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
npm start -- --file=app/Services/OrderService.php

–≠–¢–ê–ü 3: –ò—Å–ø—Ä–∞–≤—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –æ—Å—Ç–∞–ª–æ—Å—å)
- –ò–∑–≤–ª–µ–∫–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ private –º–µ—Ç–æ–¥—ã
- –ò—Å–ø–æ–ª—å–∑—É–π traits –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–∞ –≤:
refactoring/cursor-prompts/app_Services_OrderService.md
```

---

## 2. üîÑ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

### –í–æ–ø—Ä–æ—Å
> –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏—â–µ—Ç?

### –û—Ç–≤–µ—Ç

**‚úÖ –î–ê! –°–æ–∑–¥–∞–Ω –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π DuplicationDetector**

### –ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç:

#### 1. –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –º–µ—Ç–æ–¥—ã
```php
// –ù–∞—Ö–æ–¥–∏—Ç –µ—Å–ª–∏ similarity >= 85%
class ProductController {
    public function processOrder($orderId) {
        // 50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
    }
    
    public function processRefund($orderId) {
        // 45 —Å—Ç—Ä–æ–∫ –ø–æ—Ö–æ–∂–µ–≥–æ –∫–æ–¥–∞
    }
}

// –í—ã–¥–∞—Å—Ç:
// duplicate_method: 87% similarity between processOrder and processRefund
```

#### 2. –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –±–ª–æ–∫–∏ –∫–æ–¥–∞
```php
// –ù–∞—Ö–æ–¥–∏—Ç –±–ª–æ–∫–∏ 5+ —Å—Ç—Ä–æ–∫ —Å similarity >= 85%
public function method1() {
    // 10 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ A
}

public function method2() {
    // 10 —Å—Ç—Ä–æ–∫ –ø–æ—Ö–æ–∂–µ–≥–æ –∫–æ–¥–∞ A
}

// –í—ã–¥–∞—Å—Ç:
// duplicate_code_block: lines 10-20 are 90% similar to lines 35-45
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞**
   ```php
   // –û—Ä–∏–≥–∏–Ω–∞–ª:
   $userName = "John";
   $userAge = 25;
   
   // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –≤:
   $VAR = "STRING";
   $VAR = NUM;
   ```

2. **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è**
   - –£–¥–∞–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –ó–∞–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ `$VAR`
   - –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç—Ä–æ–∫–∏ –Ω–∞ `"STRING"`
   - –ó–∞–º–µ–Ω—è–µ—Ç —á–∏—Å–ª–∞ –Ω–∞ `NUM`

3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ**
   - –í—ã—á–∏—Å–ª—è–µ—Ç Jaccard similarity
   - –ü–æ—Ä–æ–≥: 85%
   - –ú–∏–Ω–∏–º—É–º: 5 —Å—Ç—Ä–æ–∫

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```json
{
  "type": "duplicate_method",
  "severity": "major",
  "message": "Methods 'processOrder' and 'processRefund' are 87% similar",
  "filePath": "app/Services/OrderService.php",
  "line": 45,
  "suggestion": "Extract common logic into a shared private method or trait",
  "refactorInfo": {
    "method1": "processOrder",
    "method2": "processRefund",
    "similarity": 0.87,
    "lines1": "45-95",
    "lines2": "100-145"
  }
}
```

---

## 3. ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã + –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–æ–ø—Ä–æ—Å
> –ö–∞–∫ –±—ã—Ç—å —Å–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–º, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–¥–∞, –Ω–æ —Ç–∞–º –∂–µ –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–æ–ª—å—à–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ cursor –ø–æ–ø—Ä–∞–≤–∏—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã –∏ –±–æ–ª—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ —É–ø–æ—Ä?

### –û—Ç–≤–µ—Ç

**üéØ –û–¢–õ–ò–ß–ù–´–ô –í–û–ü–†–û–°! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞!**

### –†–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ 3 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö:

---

### 1. üìö –£–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã —Å–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** —ç—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é –∏ **–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç**:

```markdown
## üìö –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### üìè –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö –º–µ—Ç–æ–¥–æ–≤
1. **–°–Ω–∞—á–∞–ª–∞** –æ–ø—Ä–µ–¥–µ–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ –≤ –º–µ—Ç–æ–¥–µ
2. –ò–∑–≤–ª–µ–∫–∏ –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π private –º–µ—Ç–æ–¥
3. –î–∞–π –º–µ—Ç–æ–¥–∞–º –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞
4. **–í–∞–∂–Ω–æ:** –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≤–µ—Ä—å –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!

### üßπ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
1. **–í–Ω–∏–º–∞–Ω–∏–µ:** –ï—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã - —Å–Ω–∞—á–∞–ª–∞ –∏—Ö —Ä–∞–∑–±–µ–π!
2. –ü–æ—Å–ª–µ —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞–π–¥–∏ –ø–æ—Ö–æ–∂–∏–µ –º–µ—Ç–æ–¥—ã
3. –ò–∑–≤–ª–µ–∫–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
```

---

### 2. üéØ MASTER_PROMPT —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º

–í –º–∞—Å—Ç–µ—Ä-–ø–ª–∞–Ω–µ **—è–≤–Ω–æ —É–∫–∞–∑–∞–Ω –ø–æ—Ä—è–¥–æ–∫**:

```markdown
## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º:

1. **Security (Critical)** - –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –ü–ï–†–í–´–ú–ò
2. **N+1 Queries** - –¥–æ–±–∞–≤–ª—è–µ–º eager loading
3. **–ë–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã** - –†–ê–ó–ë–ò–í–ê–ï–ú –ù–ê –ß–ê–°–¢–ò
4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –ü–û–°–õ–ï —Ä–∞–∑–±–∏–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤!
5. **Architecture** - Service Layer, Repository
6. **Code Smells** - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

### ‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:

> **–ï—Å–ª–∏ –≤ —Ñ–∞–π–ª–µ –µ—Å—Ç—å –∏ "–±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã" –∏ "–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞":**
> 1. –°–ù–ê–ß–ê–õ–ê —Ä–∞–∑–±–µ–π –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ
> 2. –ü–û–¢–û–ú –∑–∞–ø—É—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑ –∑–∞–Ω–æ–≤–æ –Ω–∞ —ç—Ç–æ—Ç —Ñ–∞–π–ª
> 3. –¢–û–õ–¨–ö–û –ü–û–¢–û–ú –∏—Å–ø—Ä–∞–≤–ª—è–π –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
>
> –ò–Ω–∞—á–µ –ø–æ—Å–ª–µ —Ä–∞–∑–±–∏–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –∏—Å—á–µ–∑–Ω—É—Ç—å —Å–∞–º–æ!
```

---

### 3. üîÑ Workflow —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow:

```bash
# –®–ê–ì 1: –ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑
npm start -- --path=/project --refactor-dir=refactoring

# –í –æ—Ç—á–µ—Ç–µ –≤–∏–¥–∏–º:
# - method_size: processOrder (60 —Å—Ç—Ä–æ–∫)
# - method_size: processRefund (55 —Å—Ç—Ä–æ–∫)
# - duplicate_code: 85% similarity –º–µ–∂–¥—É –Ω–∏–º–∏

# –®–ê–ì 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¢–û–õ–¨–ö–û –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã
# –ò—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–º–ø—Ç—ã –∏–∑ cursor-prompts/
# –†–∞–∑–±–∏—Ç—å processOrder –Ω–∞ 5 –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤
# –†–∞–∑–±–∏—Ç—å processRefund –Ω–∞ 5 –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤

# –®–ê–ì 3: –ü–û–í–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞!
npm start -- --file=app/Services/OrderService.php

# –¢–µ–ø–µ—Ä—å –≤–∏–¥–∏–º —Ä–µ–∞–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
# - duplicate_method: validateOrder –∏ validateRefund –ø–æ—Ö–æ–∂–∏ –Ω–∞ 90%
# - duplicate_method: sendEmail –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö

# –®–ê–ì 4: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
# –ò–∑–≤–ª–µ—á—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É
```

---

### –ù–∞–≥–ª—è–¥–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

#### –î–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤:

```php
class OrderService {
    // –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç:
    // 1. method_size: processOrder (60 —Å—Ç—Ä–æ–∫)
    // 2. method_size: processRefund (55 —Å—Ç—Ä–æ–∫)  
    // 3. duplicate_code: 85% similarity
    
    public function processOrder($orderId) {
        // –°—Ç—Ä–æ–∫–∏ 1-15: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–∫–∞–∑–∞
        // –°—Ç—Ä–æ–∫–∏ 16-35: —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
        // –°—Ç—Ä–æ–∫–∏ 36-45: –æ—Ç–ø—Ä–∞–≤–∫–∞ email
        // –°—Ç—Ä–æ–∫–∏ 46-60: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    }
    
    public function processRefund($orderId) {
        // –°—Ç—Ä–æ–∫–∏ 1-15: –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ü–û–•–û–ñ–ï –Ω–∞ processOrder)
        // –°—Ç—Ä–æ–∫–∏ 16-35: —Ä–∞—Å—á–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞
        // –°—Ç—Ä–æ–∫–∏ 36-45: –æ—Ç–ø—Ä–∞–≤–∫–∞ email (–ü–û–•–û–ñ–ï –Ω–∞ processOrder)
        // –°—Ç—Ä–æ–∫–∏ 46-55: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–û–•–û–ñ–ï –Ω–∞ processOrder)
    }
}
```

**‚ùå –ï—Å–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–π—á–∞—Å:**
```php
// –ò–∑–≤–ª–µ–∫–ª–∏ –æ–±—â–∏–π –∫–æ–¥
private function validateOrder($order) { ... }
private function sendEmail($order, $type) { ... }
private function log($order, $action) { ... }

// –ù–û –º–µ—Ç–æ–¥—ã –≤—Å—ë –µ—â–µ –æ–≥—Ä–æ–º–Ω—ã–µ!
public function processOrder($orderId) {
    // 30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
}
```

---

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

**–®–ê–ì 1: –†–∞–∑–±–∏—Ç—å –º–µ—Ç–æ–¥—ã**
```php
public function processOrder($orderId) {
    $order = $this->findOrder($orderId);
    $this->validateOrder($order);
    $total = $this->calculateTotal($order);
    $this->sendOrderEmail($order);
    $this->logOrder($order, 'processed');
}

public function processRefund($orderId) {
    $order = $this->findOrder($orderId);
    $this->validateRefund($order);
    $amount = $this->calculateRefund($order);
    $this->sendRefundEmail($order);
    $this->logOrder($order, 'refunded');
}

private function findOrder($id) { ... }
private function validateOrder($order) { ... }
private function validateRefund($order) { ... }
private function calculateTotal($order) { ... }
private function calculateRefund($order) { ... }
private function sendOrderEmail($order) { ... }
private function sendRefundEmail($order) { ... }
private function logOrder($order, $action) { ... }
```

**–®–ê–ì 2: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑**
```bash
npm start -- --file=app/Services/OrderService.php
```

**–®–ê–ì 3: –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ —Ä–µ–∞–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**
```
duplicate_method: sendOrderEmail –∏ sendRefundEmail –ø–æ—Ö–æ–∂–∏ –Ω–∞ 90%
```

**–®–ê–ì 4: –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
```php
private function sendEmail($order, $type) {
    // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
}

private function sendOrderEmail($order) {
    $this->sendEmail($order, 'order');
}

private function sendRefundEmail($order) {
    $this->sendEmail($order, 'refund');
}
```

---

### –ò—Ç–æ–≥–æ: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–µ**  
‚úÖ **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö**  
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**  
‚úÖ **–ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ**

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ –≤:
- [CURSOR_PROMPTS_GUIDE.md](./CURSOR_PROMPTS_GUIDE.md) - —Å–µ–∫—Ü–∏—è "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏"
- [MASTER_PROMPT.md](refactoring/cursor-prompts/MASTER_PROMPT.md) - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéì –ò—Ç–æ–≥–æ–≤—ã–π workflow

```bash
# 1. –ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑
npm start -- --path=/project --refactor-dir=refactoring

# 2. –û—Ç–∫—Ä—ã—Ç—å –º–∞—Å—Ç–µ—Ä-–ø–ª–∞–Ω
cursor refactoring/cursor-prompts/MASTER_PROMPT.md

# 3. –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —Ñ–∞–∑–∞–º:
#    Phase 1: Security (Critical)
#    Phase 2: N+1 Queries  
#    Phase 3: –ë–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã
#    Phase 4: –ü–û–í–¢–û–†–ù–´–ô –ê–ù–ê–õ–ò–ó
#    Phase 5: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
#    Phase 6: Architecture
#    Phase 7: Code Quality

# 4. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
npm start -- --file=ChangedFile.php

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
npm start -- --path=/project --compact
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [CURSOR_PROMPTS_GUIDE.md](./CURSOR_PROMPTS_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [ANALYZERS.md](./ANALYZERS.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
- [README.md](./README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

üéØ **–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —É—á—Ç–µ–Ω—ã –∏ —Ä–µ—à–µ–Ω—ã!**

